<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Web Media Application Developer Guidelines</title>
    <script
     src="https://www.w3.org/Tools/respec/respec-w3c-common"
     class='remove'></script>
    <script class="remove">
      var respecConfig = {
        specStatus: "CG-DRAFT",
        editors: [{
          name: "Jeff Burtoft",
          url: "mailto:jeffburt@microsoft.com",
          company: "Microsoft",
          companyURL: "http://www.microsoft.com"
        }],
        processVersion: 2015,
        edDraftURI: "http://w3c.github.io/webmediaguidelines",
        shortName: "dahut",
        wg: "Web Media API Community Group",
        wgURI: "https://www.w3.org/community/webmediaapi/",
      };
    </script>
  </head>
  <body>
    <section id="abstract">
      <p>
        This specification companion guide to the Web Media API spec. While the Web Media API spec is targeted at device implementations to support media web apps in 2017, this specification will outline best practices and developer guidance for implementing web media apps. This specification should be updated at least annually to keep pace with the evolving Web platform. The target devices will include any device that runs a modern HTML user agent, including televisions, game machines, set-top boxes, mobile devices and personal computers.
      </p>
      <p>
        The goal of this Web Media API Community Group specification is to transition to the W3C Recommendation Track for standards development.
      </p>
    </section>
    <section id="sotd"></section>
    <section>
      <h2>Introduction</h2>
      <ol class="ednote" title="Notes on v1 draft specification:">
        <li>This document is directed towards application developers.  Its content will contain best practices for building media applications across devices, it will not direction to device manufactures or User Agent implementers. </li>
        <li>This is a companion spec put forth by the Web Media API Community Group.</li>
      </ol>
      <h3>Scope</h3>
      <p></p>
      <h3>Definitions</h3>
      <p>TBD</p>
   </section>
   <section>
      <h2>Media Playback Use Cases</h2>
      <p>
      </p>
      <section>
            <h3>Streaming overview</h3>
            <p>
              NOTE: Adding a brief introductory section that removes the need for duplication of material across VOD and linear sections. Here we can outline the broad mechanics that are shared by the two use cases allowing us to focus on the distinctions in the respective sections.
            </p>
            <h4>General Description</h4>
            <p>Material (typically in video or audio content) is made available by a content provider via a web-enabled application and delivered by a content distribution network. There are three distinct interlocking processes: generation, delivery and consumption / playback.
            </p>
            <h4>Content Generation</h4>
            <p>
              Ideally the input source is uncompressed or at a minimum losslessly compressed to ensure the best results.
            </p>
            <p>
              Content is generated by taking this source and encoding it with reference to an encoding profile. First the content is duplicated into different versions. After this is it split temporally into segments of different length.
            </p>
            <p>
              The first process is defined by an encoding profile. Profiles describe a set of constraints to be used when video is being prepared for consumption by a range of video applications. The description includes the different bitrates to be generated during the encoding process that will allow for the same content to be consumed on a wide variety of devices in different networked scenarios from cellular to LAN.
            </p>
            <p>
              The second process is performed by a splitter which segments the source files of differing qualities. These are then packaged into a transport format such as transport streams (.ts) or fragmented mp4s (.m4s) after this they are encrypted with a DRM that is suitable for the environment where the content is going to be played out. The packager is also responsible for the generation of a manifest file, typically a DASH (.mpd), HLS (.m3u8) or possibly Smooth (.ism) or  HDS (.f4v) describes the location of the media and its format.
            </p>
            <h4>Content Delivery</h4>
            <p>
              After the content has been generated the resulting segments of video and corresponding manifest files are pushed to an origin server. However, the assets are rarely delivered directly from the origin.
            </p>
            <p>
              At this point the control in the chain switches to the client web video application. The content provider supplies the client with the URL of a manifest file located on a CDN rather than the origin. /
              The manifest is typically passed to a player. The player makes a GET request for the manifest from an edge server in a CDN, this is determined by DNS. The CDN does one of two things: if it has the asset it returns it to the player, if it does not it requests it from the origin and then returns it to the client.
            </p>
            <h4>Content Playback</h4>
            <p>
              Once the player has the manifest it parses it. At this point the behaviour differs between players found on the different devices depending on the transport formats. However, broadly, it behaves in the following way: <br>
<ol><li>The players ABR determines the bandwidth available to the client by examining the response times associated with the request for the manifest, how many bytes were received in what time period. This provides enough information to determine the playback quality that the player can sustain over a proportion of the length of the asset, or in the case of live streaming a specific timeframe. </li>
<li>Once the player has this information it can then compare this with the the metadata from the manifest that describes the different qualities that the content provider is supplying. It picks the quality level with an average bitrate that is as close to the available bitrate but within its bounds to avoid a situation where a consistent experience is interrupted as the player requires more data than the current network bandwidth can supply, where the playerâ€™s buffer is emptying faster than it is being filled.
<li>It then requests a segment from a location on the edge server that typically relative to the location of the manifest.

<li>Once it has received the segment it is then typically decrypted in accordance with the specific DRM used
<li>It then adds it to the players video buffer.
<li>The media engine pulls the video data from the buffer and passes it to the video surface where it is played out.

<li>In a situation where the bandwidth availability remains constant the player will continue to request chunks from the same quality stream. In the event a change in network performance the player will make a decision about the need to either drop to a lower quality stream or request a stream from a higher quality. </li></ol>
            </p>
      </section>
      <section>
            <h3>On-Demand Streaming</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Streaming</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Streaming with Server Side Ad Insertion</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Streaming with Client Side Ad Insertion</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Linear Streaming</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Linear Streaming with Client Side Ad Insertion</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>On-Demand Streaming with Trick Mode</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Streaming with Trick Mode</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>On-Demand Streaming with Thumbnail Navigation</h3>
            <p>TBD
            </p>
      </section>
      <section>
            <h3>Live Streaming with Thumbnail Navigation</h3>
            <p>TBD
            </p>
      </section>

   </section>
   <section>
      <h2>Media Playback Methods</h2>
      <p>TBD
      </p>
      <section>
        <h3>Device Identification</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Device Media Profile Support</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Device Key System Support</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Device Content Protection Capabilities</h3>
        <p>How to determine the content protection capabilities of a device.
        </p>
      </section>
      <section>
        <h3>Using Encrypted Media Extensions</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Using Media Source Extensions</h3>
        <p>TBD
        </p>
      </section>

   </section>
   <section>
      <h2>Content Encoding Guidelines</h2>
      <p>
      </p>
      <section>
        <h3>For On-Demand Streaming</h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>
      <section>
        <h3>For Live Streaming</h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>
      <section>
        <h3>Ad Encoding for On-demand Content</h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>
      <section>
        <h3>Ad Encoding for Live Streaming with Server Side Ad-insertion</h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>
      <section>
        <h3>Trick Mode Track</h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>
      <section>
        <h3>Thumbnails Track </h3>
        <p>TBD
        </p>
        <section>
          <h4>Media Encoding</h4>
          <p>TBD</p>
        </section>
        <section>
          <h4>Manifest Preparation</h4>
          <p>TBD</p>
        </section>
      </section>

   </section>
   <section>
      <h2>Sample Applications</h2>
      <p>
      </p>
      <section>
        <h3>On-Demand Streaming</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Streaming</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Streaming with Server Side Ad Insertion</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Streaming with Client Side Ad Insertion</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Linear Streaming</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Linear Streaming with Client Side Ad Insertion</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>On-Demand Streaming with Trick Mode</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Streaming with Trick Mode</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>On-Demand Streaming with Thumbnail Navigation</h3>
        <p>TBD
        </p>
      </section>
      <section>
        <h3>Live Streaming with Thumbnail Navigation</h3>
        <p>TBD
        </p>
      </section>


   </section>
  </body>
</html>
